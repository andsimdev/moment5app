{"version":3,"sources":["main.js"],"names":["url","tableEl","document","getElementById","submitbtnEl","coursecodeinputEl","coursenameinputEl","progressioninputEl","coursesyllabusEl","formEl","printCourses","innerHTML","fetch","then","res","json","data","forEach","course","concat","coursecode","coursename","progression","coursesyllabus","error","console","log","saveCourse","value","JSONdata","JSON","stringify","method","body","response","reset","window","onload","addEventListener","event","preventDefault"],"mappings":"AAAA,aACA,IAAMA,IAAM,oDAGNC,QAAUC,SAASC,eAAe,SAClCC,YAAcF,SAASC,eAAe,WACtCE,kBAAoBH,SAASC,eAAe,cAC5CG,kBAAoBJ,SAASC,eAAe,cAC5CI,mBAAqBL,SAASC,eAAe,eAC7CK,iBAAmBN,SAASC,eAAe,kBAC3CM,OAASP,SAASC,eAAe,QAevC,SAASO,eAELT,QAAQU,UAAR,4JASAC,MAAMZ,KACDa,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GAEHA,EAAKC,SAAQ,SAAAC,GACTjB,QAAQU,WAAR,uCAAAQ,OAGED,EAAOE,WAHT,2BAAAD,OAIED,EAAOG,WAJT,2BAAAF,OAKED,EAAOI,YALT,oCAAAH,OAMWD,EAAOK,eANlB,eAAAJ,OAM8CD,EAAOE,WANrD,mDALZ,OAiBW,SAAAI,GAAK,OAAIC,QAAQC,IAAIF,MAIpC,SAASG,aAEL,IAAIX,EAAO,CACPI,WAAYf,kBAAkBuB,MAC9BP,WAAYf,kBAAkBsB,MAC9BN,YAAaf,mBAAmBqB,MAChCL,eAAgBf,iBAAiBoB,OAIjCC,EAAWC,KAAKC,UAAUf,GAG9BJ,MAAMZ,IAAK,CACPgC,OAAQ,OACRC,KAAMJ,IAGThB,MAAK,SAAAqB,GAAQ,OAAIA,EAASnB,UAE1BF,MAAK,SAAAE,GACFU,QAAQC,IAAIX,GACZL,eAEAD,OAAO0B,WAXX,OAcO,SAAAX,GAAK,OAAIC,QAAQC,IAAIF,MAtEhCY,OAAOC,OAAS3B,eAIhBN,YAAYkC,iBAAiB,SAAS,SAAUC,GAC5CA,EAAMC,iBACNb","file":"../js/main.js","sourcesContent":["// GLOBALA VARIABLER\r\nconst url = 'http://localhost/webbutveckling3/moment5/rest.php';\r\n\r\n// HÄMTA IN HTML-ELEMENT\r\nconst tableEl = document.getElementById(\"table\");\r\nconst submitbtnEl = document.getElementById(\"savebtn\");\r\nconst coursecodeinputEl = document.getElementById(\"coursecode\");\r\nconst coursenameinputEl = document.getElementById(\"coursename\");\r\nconst progressioninputEl = document.getElementById(\"progression\");\r\nconst coursesyllabusEl = document.getElementById(\"coursesyllabus\");\r\nconst formEl = document.getElementById(\"form\");\r\n\r\n// EVENTHANTERARE\r\n// Då fönstret laddat, kör funktionen för att skriva ut alla kurser\r\nwindow.onload = printCourses();\r\n\r\n// Vid klick på submit-knappen i formuläret, kör funktion för att spara ny kurs\r\n// Förhindra omladdning av webbläsarfönstret\r\nsubmitbtnEl.addEventListener(\"click\", function (event) {\r\n    event.preventDefault();\r\n    saveCourse();\r\n});\r\n\r\n// FUNKTIONER\r\n// Hämta och skriv ut alla kurser\r\nfunction printCourses() {\r\n    // Rensa tabellen för att skriva ut alla kurser på nytt\r\n    tableEl.innerHTML =\r\n    `<tr>\r\n    <th class=\"w1\">Kurskod</th>\r\n    <th class=\"w2\">Kursnamn</th>\r\n    <th class=\"w1\">Progression</th>\r\n    <th class=\"w1\">Kursplan</th>\r\n    </tr>`;\r\n\r\n    // Hämta in JSON-data med alla kurser från webbtjänsten\r\n    fetch(url)\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n            // Loopa ut allt innehåll till tabellen\r\n            data.forEach(course => {\r\n                tableEl.innerHTML +=\r\n                    `\r\n            <tr>\r\n            <td>${course.coursecode}</td>\r\n            <td>${course.coursename}</td>\r\n            <td>${course.progression}</td>\r\n            <td><a href=\"${course.coursesyllabus}\">Kursplan ${course.coursecode}</a></td>\r\n            <tr>\r\n            `\r\n            });\r\n        })\r\n        // Fånga eventuella fel och skriv ut\r\n        .catch(error => console.log(error));\r\n}\r\n\r\n// Skicka ny kurs till webbtjänsten med fetch/post\r\nfunction saveCourse() {\r\n    // Samla in data från HTML-formuläret och lagra i ett objekt\r\n    let data = {\r\n        coursecode: coursecodeinputEl.value,\r\n        coursename: coursenameinputEl.value,\r\n        progression: progressioninputEl.value,\r\n        coursesyllabus: coursesyllabusEl.value\r\n    }\r\n\r\n    // Konvertera objektet till JSON-format\r\n    let JSONdata = JSON.stringify(data);\r\n\r\n    // Skicka JSON-data till webbtjänsten med metoden post\r\n    fetch(url, {\r\n        method: \"POST\",\r\n        body: JSONdata\r\n    })\r\n    // Konvertera svaret till JSON-format\r\n    .then(response => response.json())\r\n    // Skriv ut svaret från webbtjänsten och kör funktionen för att skriva ut alla kurser på nytt\r\n    .then(json => {\r\n        console.log(json);\r\n        printCourses();\r\n        // Rensa formuläret\r\n        formEl.reset();\r\n    })\r\n    // Fånga eventuella fel och skriv ut\r\n    .catch(error => console.log(error));\r\n}"]}